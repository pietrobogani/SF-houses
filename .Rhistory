}
if (Buyout_Agreements_clean$nhood[i] == 'Inner Sunset'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.762068
Buyout_Agreements_clean$centroid_long[i] <- -122.467189
}
if (Buyout_Agreements_clean$nhood[i] == 'Japantown'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.785840
Buyout_Agreements_clean$centroid_long[i] <- -122.429952
}
if (Buyout_Agreements_clean$nhood[i] == 'Lakeshore'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.718720
Buyout_Agreements_clean$centroid_long[i] <- -122.477916
}
if (Buyout_Agreements_clean$nhood[i] == 'Lone Mountain/USF'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.777975
Buyout_Agreements_clean$centroid_long[i] <- -122.452816
}
if (Buyout_Agreements_clean$nhood[i] == 'Marina'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.802877
Buyout_Agreements_clean$centroid_long[i] <- -122.436969
}
if (Buyout_Agreements_clean$nhood[i] == 'McLaren Park'){ #non molto convinto, l'ho messo in mezzo al parco, le vie sono tutte attorno al parco gigante e non si capiscono i confini su google maps
Buyout_Agreements_clean$centroid_lat[i] <- 37.718407
Buyout_Agreements_clean$centroid_long[i] <- -122.418904
}
if (Buyout_Agreements_clean$nhood[i] == 'Mission'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.758338
Buyout_Agreements_clean$centroid_long[i] <- -122.414678
}
if (Buyout_Agreements_clean$nhood[i] == 'Mission Bay'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.770674
Buyout_Agreements_clean$centroid_long[i] <- -122.392015
}
if (Buyout_Agreements_clean$nhood[i] == 'Nob Hill'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.793044
Buyout_Agreements_clean$centroid_long[i] <- -122.414461
}
if (Buyout_Agreements_clean$nhood[i] == 'Noe Valley'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.747095
Buyout_Agreements_clean$centroid_long[i] <- -122.431421
}
if (Buyout_Agreements_clean$nhood[i] == 'North Beach'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.799254
Buyout_Agreements_clean$centroid_long[i] <- -122.407458
}
if (Buyout_Agreements_clean$nhood[i] == 'Oceanview/Merced/Ingleside'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.718959
Buyout_Agreements_clean$centroid_long[i] <- -122.462039
}
if (Buyout_Agreements_clean$nhood[i] == 'Outer Mission'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.709585
Buyout_Agreements_clean$centroid_long[i] <- -122.455082
}
if (Buyout_Agreements_clean$nhood[i] == 'Outer Richmond'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.776683
Buyout_Agreements_clean$centroid_long[i] <- -122.489908
}
if (Buyout_Agreements_clean$nhood[i] == 'Pacific Heights'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.792182
Buyout_Agreements_clean$centroid_long[i] <- -122.432784
}
if (Buyout_Agreements_clean$nhood[i] == 'Portola'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.726470
Buyout_Agreements_clean$centroid_long[i] <- -122.407642
}
if (Buyout_Agreements_clean$nhood[i] == 'Potrero Hill'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.759056
Buyout_Agreements_clean$centroid_long[i] <- -122.398618
}
if (Buyout_Agreements_clean$nhood[i] == 'Presidio Heights' | Buyout_Agreements_clean$nhood[i] == 'Presidio'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.788849
Buyout_Agreements_clean$centroid_long[i] <- -122.452228
}
if (Buyout_Agreements_clean$nhood[i] == 'Russian Hill'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.800432
Buyout_Agreements_clean$centroid_long[i] <- -122.417609
}
if (Buyout_Agreements_clean$nhood[i] == 'Seacliff'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.785975
Buyout_Agreements_clean$centroid_long[i] <- -122.489522
}
if (Buyout_Agreements_clean$nhood[i] == 'South of Market'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.779527
Buyout_Agreements_clean$centroid_long[i] <- -122.405727
}
if (Buyout_Agreements_clean$nhood[i] == 'Sunset/Parkside'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.749026
Buyout_Agreements_clean$centroid_long[i] <- -122.493742
}
if (Buyout_Agreements_clean$nhood[i] == 'Tenderloin'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.784141
Buyout_Agreements_clean$centroid_long[i] <- -122.414748
}
if (Buyout_Agreements_clean$nhood[i] == 'Twin Peaks'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.753375
Buyout_Agreements_clean$centroid_long[i] <- -122.445652
}
if (Buyout_Agreements_clean$nhood[i] == 'Visitacion Valley'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.713141
Buyout_Agreements_clean$centroid_long[i] <- -122.408825
}
if (Buyout_Agreements_clean$nhood[i] == 'West of Twin Peaks'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.737955
Buyout_Agreements_clean$centroid_long[i] <- -122.460363
}
if (Buyout_Agreements_clean$nhood[i] == 'Western Addition'){
Buyout_Agreements_clean$centroid_lat[i] <- 37.780587
Buyout_Agreements_clean$centroid_long[i] <- -122.434510
}
}
write.csv(Buyout_Agreements_clean,"C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements_Clean.csv")
View(Buyout_Agreements_clean)
#Calcolo i df con numero di buyout per nhood per anno e per mese
vect_year = paste(Buyout_Agreements_Clean$year)
vect_month = paste(Buyout_Agreements_Clean$month)
vect_nhood = paste(Buyout_Agreements_Clean$nhood)
vect_aus = paste(vect_month,vect_year,vect_nhood)
vect_aus2 = paste(vect_year,vect_nhood)
Buyout_Agreements_Clean$year_nhood = vect_aus2
Buyout_Agreements_Clean$month_year_nhood = vect_aus
rm(vect_aus,vect_aus2,vect_year,vect_nhood,vect_month)
length(unique(Buyout_Agreements_Clean$year_nhood)) #260 osservazioni
Buyout_Agreements_Clean$dummy = 1
buyout_nhood_yearly = aggregate(Buyout_Agreements_Clean[,c(2,11)], by = list(Buyout_Agreements_Clean$year_nhood), FUN = sum)
names(buyout_nhood_yearly)[names(buyout_nhood_yearly) == 'Group.1'] <- 'year_nhood'
names(buyout_nhood_yearly)[names(buyout_nhood_yearly) == 'dummy'] <- 'Count'
buyout_nhood_yearly$avg_buyout = buyout_nhood_yearly$buyout_amount / buyout_nhood_yearly$Count
length(unique(Buyout_Agreements_Clean$month_year_nhood)) #1383 osservazioni
buyout_nhood_monthly = aggregate(Buyout_Agreements_Clean[,c(2,11)], by = list(Buyout_Agreements_Clean$month_year_nhood), FUN = sum)
names(buyout_nhood_monthly)[names(buyout_nhood_monthly) == 'Group.1'] <- 'nhood_month_year'
names(buyout_nhood_monthly)[names(buyout_nhood_monthly) == 'dummy'] <- 'Count'
buyout_nhood_monthly$avg_buyout = buyout_nhood_monthly$buyout_amount / buyout_nhood_monthly$Count
#Adesso son da splittare di nuovo mese-anno e nhood e si può plottare tutto (analisi esplorativa)!
for (i in 1:length(buyout_nhood_monthly[,1])) {   #preparo bene le coordinate
temp <- strsplit(buyout_nhood_monthly[i,2], " ")
for (j in 1:length(temp[[1]])){
buyout_nhood_monthly[i,5+j] <- temp[[1]][j]
}
}
for( i in 1:length(buyout_nhood_monthly[,1])){  #preparo l'address
j = 9
while (j < 12) {
if(!(is.na(buyout_nhood_monthly[i,j]))) {
buyout_nhood_monthly[i,8] = paste(buyout_nhood_monthly[i,8], buyout_nhood_monthly[i,j], sep=" ")
j = j+1
}
else
j = 14
}
}
buyout_nhood_monthly <- buyout_nhood_monthly[, -c(1,9:11)]
colnames(buyout_nhood_monthly) <- c('nhood_month_year','buyout_amount', 'count','avg_buyout', 'month','year', 'nhood')
#Calcolo i df con numero di buyout per nhood per anno e per mese
vect_year = paste(Buyout_Agreements_clean$year)
vect_month = paste(Buyout_Agreements_clean$month)
vect_nhood = paste(Buyout_Agreements_clean$nhood)
vect_aus = paste(vect_month,vect_year,vect_nhood)
vect_aus2 = paste(vect_year,vect_nhood)
Buyout_Agreements_clean$year_nhood = vect_aus2
Buyout_Agreements_clean$month_year_nhood = vect_aus
rm(vect_aus,vect_aus2,vect_year,vect_nhood,vect_month)
length(unique(Buyout_Agreements_clean$year_nhood)) #260 osservazioni
Buyout_Agreements_clean$dummy = 1
buyout_nhood_yearly = aggregate(Buyout_Agreements_clean[,c(2,11)], by = list(Buyout_Agreements_clean$year_nhood), FUN = sum)
names(buyout_nhood_yearly)[names(buyout_nhood_yearly) == 'Group.1'] <- 'year_nhood'
names(buyout_nhood_yearly)[names(buyout_nhood_yearly) == 'dummy'] <- 'Count'
buyout_nhood_yearly$avg_buyout = buyout_nhood_yearly$buyout_amount / buyout_nhood_yearly$Count
length(unique(Buyout_Agreements_clean$month_year_nhood)) #1383 osservazioni
buyout_nhood_monthly = aggregate(Buyout_Agreements_clean[,c(2,11)], by = list(Buyout_Agreements_clean$month_year_nhood), FUN = sum)
names(buyout_nhood_monthly)[names(buyout_nhood_monthly) == 'Group.1'] <- 'nhood_month_year'
names(buyout_nhood_monthly)[names(buyout_nhood_monthly) == 'dummy'] <- 'Count'
buyout_nhood_monthly$avg_buyout = buyout_nhood_monthly$buyout_amount / buyout_nhood_monthly$Count
#Adesso son da splittare di nuovo mese-anno e nhood e si può plottare tutto (analisi esplorativa)!
for (i in 1:length(buyout_nhood_monthly[,1])) {   #preparo bene le coordinate
temp <- strsplit(buyout_nhood_monthly[i,2], " ")
for (j in 1:length(temp[[1]])){
buyout_nhood_monthly[i,5+j] <- temp[[1]][j]
}
}
for( i in 1:length(buyout_nhood_monthly[,1])){  #preparo l'address
j = 9
while (j < 12) {
if(!(is.na(buyout_nhood_monthly[i,j]))) {
buyout_nhood_monthly[i,8] = paste(buyout_nhood_monthly[i,8], buyout_nhood_monthly[i,j], sep=" ")
j = j+1
}
else
j = 14
}
}
buyout_nhood_monthly <- buyout_nhood_monthly[, -c(1,9:11)]
colnames(buyout_nhood_monthly) <- c('nhood_month_year','buyout_amount', 'count','avg_buyout', 'month','year', 'nhood')
write.csv(buyout_nhood_monthly,"C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/buyout_nhood_monthly.csv")
for (i in 1:length(buyout_nhood_yearly[,1])) {   #preparo bene le coordinate
temp <- strsplit(buyout_nhood_yearly[i,2], " ")
for (j in 1:length(temp[[1]])){
buyout_nhood_yearly[i,5+j] <- temp[[1]][j]
}
}
for( i in 1:length(buyout_nhood_yearly[,1])){  #preparo l'address
j = 8
while (j <11 ) {
if(!(is.na(buyout_nhood_yearly[i,j]))) {
buyout_nhood_yearly[i,7] = paste(buyout_nhood_yearly[i,7], buyout_nhood_yearly[i,j], sep=" ")
j = j+1
}
else
j = 13
}
}
buyout_nhood_yearly <- buyout_nhood_yearly[, -c(1,8:10)]
colnames(buyout_nhood_yearly) <- c('year_nhood', 'buyout_amount','count','avg_buyout','year', 'nhood')
#Calcolo i df con numero di buyout per nhood per anno e per mese
vect_year = paste(Buyout_Agreements_clean$year)
vect_month = paste(Buyout_Agreements_clean$month)
vect_nhood = paste(Buyout_Agreements_clean$nhood)
vect_aus = paste(vect_month,vect_year,vect_nhood)
vect_aus2 = paste(vect_year,vect_nhood)
Buyout_Agreements_clean$year_nhood = vect_aus2
Buyout_Agreements_clean$month_year_nhood = vect_aus
rm(vect_aus,vect_aus2,vect_year,vect_nhood,vect_month)
length(unique(Buyout_Agreements_clean$year_nhood)) #260 osservazioni
Buyout_Agreements_clean$dummy = 1
buyout_nhood_yearly = aggregate(Buyout_Agreements_clean[,c(2,11)], by = list(Buyout_Agreements_clean$year_nhood), FUN = sum)
names(buyout_nhood_yearly)[names(buyout_nhood_yearly) == 'Group.1'] <- 'year_nhood'
names(buyout_nhood_yearly)[names(buyout_nhood_yearly) == 'dummy'] <- 'Count'
buyout_nhood_yearly$avg_buyout = buyout_nhood_yearly$buyout_amount / buyout_nhood_yearly$Count
length(unique(Buyout_Agreements_clean$month_year_nhood)) #1383 osservazioni
buyout_nhood_monthly = aggregate(Buyout_Agreements_clean[,c(2,11)], by = list(Buyout_Agreements_clean$month_year_nhood), FUN = sum)
names(buyout_nhood_monthly)[names(buyout_nhood_monthly) == 'Group.1'] <- 'nhood_month_year'
names(buyout_nhood_monthly)[names(buyout_nhood_monthly) == 'dummy'] <- 'Count'
buyout_nhood_monthly$avg_buyout = buyout_nhood_monthly$buyout_amount / buyout_nhood_monthly$Count
#Adesso son da splittare di nuovo mese-anno e nhood e si può plottare tutto (analisi esplorativa)!
for (i in 1:length(buyout_nhood_monthly[,1])) {   #preparo bene le coordinate
temp <- strsplit(buyout_nhood_monthly[i,2], " ")
for (j in 1:length(temp[[1]])){
buyout_nhood_monthly[i,5+j] <- temp[[1]][j]
}
}
for( i in 1:length(buyout_nhood_monthly[,1])){  #preparo l'address
j = 9
while (j < 12) {
if(!(is.na(buyout_nhood_monthly[i,j]))) {
buyout_nhood_monthly[i,8] = paste(buyout_nhood_monthly[i,8], buyout_nhood_monthly[i,j], sep=" ")
j = j+1
}
else
j = 14
}
}
buyout_nhood_monthly <- buyout_nhood_monthly[, -c(1,9:11)]
colnames(buyout_nhood_monthly) <- c('nhood_month_year','buyout_amount', 'count','avg_buyout', 'month','year', 'nhood')
write.csv(buyout_nhood_monthly,"C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/buyout_nhood_monthly.csv")
for (i in 1:length(buyout_nhood_yearly[,1])) {   #preparo bene le coordinate
temp <- strsplit(buyout_nhood_yearly[i,2], " ")
for (j in 1:length(temp[[1]])){
buyout_nhood_yearly[i,5+j] <- temp[[1]][j]
}
}
for( i in 1:length(buyout_nhood_yearly[,1])){  #preparo l'address
j = 8
while (j <11 ) {
if(!(is.na(buyout_nhood_yearly[i,j]))) {
buyout_nhood_yearly[i,7] = paste(buyout_nhood_yearly[i,7], buyout_nhood_yearly[i,j], sep=" ")
j = j+1
}
else
j = 13
}
}
buyout_nhood_yearly <- buyout_nhood_yearly[, -c(1,8:10)]
colnames(buyout_nhood_yearly) <- c('year_nhood', 'buyout_amount','count','avg_buyout','year', 'nhood')
View(Buyout_Agreements_clean)
#Calcolo i df con numero di buyout per nhood per anno e per mese
temporary <- Buyout_Agreements_clean
Buyout_Agreements_clean <- Buyout_Agreements_clean[-c(9,10)]
vect_year = paste(Buyout_Agreements_clean$year)
vect_month = paste(Buyout_Agreements_clean$month)
vect_nhood = paste(Buyout_Agreements_clean$nhood)
vect_aus = paste(vect_month,vect_year,vect_nhood)
vect_aus2 = paste(vect_year,vect_nhood)
Buyout_Agreements_clean$year_nhood = vect_aus2
Buyout_Agreements_clean$month_year_nhood = vect_aus
rm(vect_aus,vect_aus2,vect_year,vect_nhood,vect_month)
length(unique(Buyout_Agreements_clean$year_nhood)) #260 osservazioni
Buyout_Agreements_clean$dummy = 1
buyout_nhood_yearly = aggregate(Buyout_Agreements_clean[,c(2,11)], by = list(Buyout_Agreements_clean$year_nhood), FUN = sum)
names(buyout_nhood_yearly)[names(buyout_nhood_yearly) == 'Group.1'] <- 'year_nhood'
names(buyout_nhood_yearly)[names(buyout_nhood_yearly) == 'dummy'] <- 'Count'
buyout_nhood_yearly$avg_buyout = buyout_nhood_yearly$buyout_amount / buyout_nhood_yearly$Count
length(unique(Buyout_Agreements_clean$month_year_nhood)) #1383 osservazioni
buyout_nhood_monthly = aggregate(Buyout_Agreements_clean[,c(2,11)], by = list(Buyout_Agreements_clean$month_year_nhood), FUN = sum)
names(buyout_nhood_monthly)[names(buyout_nhood_monthly) == 'Group.1'] <- 'nhood_month_year'
names(buyout_nhood_monthly)[names(buyout_nhood_monthly) == 'dummy'] <- 'Count'
buyout_nhood_monthly$avg_buyout = buyout_nhood_monthly$buyout_amount / buyout_nhood_monthly$Count
#Adesso son da splittare di nuovo mese-anno e nhood e si può plottare tutto (analisi esplorativa)!
for (i in 1:length(buyout_nhood_monthly[,1])) {   #preparo bene le coordinate
temp <- strsplit(buyout_nhood_monthly[i,2], " ")
for (j in 1:length(temp[[1]])){
buyout_nhood_monthly[i,5+j] <- temp[[1]][j]
}
}
for( i in 1:length(buyout_nhood_monthly[,1])){  #preparo l'address
j = 9
while (j < 12) {
if(!(is.na(buyout_nhood_monthly[i,j]))) {
buyout_nhood_monthly[i,8] = paste(buyout_nhood_monthly[i,8], buyout_nhood_monthly[i,j], sep=" ")
j = j+1
}
else
j = 14
}
}
buyout_nhood_monthly <- buyout_nhood_monthly[, -c(1,9:11)]
colnames(buyout_nhood_monthly) <- c('nhood_month_year','buyout_amount', 'count','avg_buyout', 'month','year', 'nhood')
write.csv(buyout_nhood_monthly,"C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/buyout_nhood_monthly.csv")
for (i in 1:length(buyout_nhood_yearly[,1])) {   #preparo bene le coordinate
temp <- strsplit(buyout_nhood_yearly[i,2], " ")
for (j in 1:length(temp[[1]])){
buyout_nhood_yearly[i,5+j] <- temp[[1]][j]
}
}
for( i in 1:length(buyout_nhood_yearly[,1])){  #preparo l'address
j = 8
while (j <11 ) {
if(!(is.na(buyout_nhood_yearly[i,j]))) {
buyout_nhood_yearly[i,7] = paste(buyout_nhood_yearly[i,7], buyout_nhood_yearly[i,j], sep=" ")
j = j+1
}
else
j = 13
}
}
buyout_nhood_yearly <- buyout_nhood_yearly[, -c(1,8:10)]
View(Buyout_Agreements_clean)
Buyout_Agreements_clean <- read.csv("C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements_clean.csv", header=TRUE)
#Calcolo i df con numero di buyout per nhood per anno e per mese
temporary <- Buyout_Agreements_clean
Buyout_Agreements_clean <- Buyout_Agreements_clean[-c(9,10)]
vect_year = paste(Buyout_Agreements_clean$year)
vect_month = paste(Buyout_Agreements_clean$month)
vect_nhood = paste(Buyout_Agreements_clean$nhood)
vect_aus = paste(vect_month,vect_year,vect_nhood)
vect_aus2 = paste(vect_year,vect_nhood)
Buyout_Agreements_clean$year_nhood = vect_aus2
Buyout_Agreements_clean$month_year_nhood = vect_aus
rm(vect_aus,vect_aus2,vect_year,vect_nhood,vect_month)
length(unique(Buyout_Agreements_clean$year_nhood)) #260 osservazioni
Buyout_Agreements_clean$dummy = 1
buyout_nhood_yearly = aggregate(Buyout_Agreements_clean[,c(2,11)], by = list(Buyout_Agreements_clean$year_nhood), FUN = sum)
vect_aus2
#Calcolo i df con numero di buyout per nhood per anno e per mese
temporary <- Buyout_Agreements_clean
Buyout_Agreements_clean <- Buyout_Agreements_clean[-c(9,10)]
vect_year = paste(Buyout_Agreements_clean$year)
vect_month = paste(Buyout_Agreements_clean$month)
vect_nhood = paste(Buyout_Agreements_clean$nhood)
vect_aus = paste(vect_month,vect_year,vect_nhood)
vect_aus2 = paste(vect_year,vect_nhood)
Buyout_Agreements_clean$year_nhood = vect_aus2
Buyout_Agreements_clean$month_year_nhood = vect_aus
rm(vect_aus,vect_aus2,vect_year,vect_nhood,vect_month)
vect_aus2
temporary <- Buyout_Agreements_clean
Buyout_Agreements_clean <- Buyout_Agreements_clean[-c(9,10)]
vect_year = paste(Buyout_Agreements_clean$year)
vect_month = paste(Buyout_Agreements_clean$month)
vect_nhood = paste(Buyout_Agreements_clean$nhood)
vect_aus = paste(vect_month,vect_year,vect_nhood)
vect_aus2 = paste(vect_year,vect_nhood)
Buyout_Agreements_clean$year_nhood = vect_aus2
Buyout_Agreements_clean$month_year_nhood = vect_aus
vect_aus2
Buyout_Agreements_clean <- read.csv("C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements_clean.csv", header=TRUE)
View(Buyout_Agreements_clean)
#Calcolo i df con numero di buyout per nhood per anno e per mese
temporary <- Buyout_Agreements_clean
Buyout_Agreements_clean <- Buyout_Agreements_clean[-c(10,11)]
vect_year = paste(Buyout_Agreements_clean$year)
vect_month = paste(Buyout_Agreements_clean$month)
vect_nhood = paste(Buyout_Agreements_clean$nhood)
vect_aus = paste(vect_month,vect_year,vect_nhood)
vect_aus2 = paste(vect_year,vect_nhood)
Buyout_Agreements_clean$year_nhood = vect_aus2
Buyout_Agreements_clean$month_year_nhood = vect_aus
rm(vect_aus,vect_aus2,vect_year,vect_nhood,vect_month)
length(unique(Buyout_Agreements_clean$year_nhood)) #260 osservazioni
Buyout_Agreements_clean$dummy = 1
buyout_nhood_yearly = aggregate(Buyout_Agreements_clean[,c(2,11)], by = list(Buyout_Agreements_clean$year_nhood), FUN = sum)
View(Buyout_Agreements_clean)
Buyout_Agreements_clean <- read.csv("C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements_clean.csv", header=TRUE)
#Calcolo i df con numero di buyout per nhood per anno e per mese
temporary <- Buyout_Agreements_clean
Buyout_Agreements_clean <- Buyout_Agreements_clean[-c(2,10,11)]
vect_year = paste(Buyout_Agreements_clean$year)
vect_month = paste(Buyout_Agreements_clean$month)
vect_nhood = paste(Buyout_Agreements_clean$nhood)
vect_aus = paste(vect_month,vect_year,vect_nhood)
vect_aus2 = paste(vect_year,vect_nhood)
Buyout_Agreements_clean$year_nhood = vect_aus2
Buyout_Agreements_clean$month_year_nhood = vect_aus
rm(vect_aus,vect_aus2,vect_year,vect_nhood,vect_month)
length(unique(Buyout_Agreements_clean$year_nhood)) #260 osservazioni
Buyout_Agreements_clean$dummy = 1
buyout_nhood_yearly = aggregate(Buyout_Agreements_clean[,c(2,11)], by = list(Buyout_Agreements_clean$year_nhood), FUN = sum)
Buyout_Agreements_clean[,c(2,11)]
typeof(Buyout_Agreements_clean[-c(9,10)])
typeof(Buyout_Agreements_clean[,c(2,11)])
Buyout_Agreements_clean[,c(2,11)]
typeof(Buyout_Agreements_clean[,c(2)])
Buyout_Agreements_clean <- read.csv("C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements_clean.csv", header=TRUE)
#Calcolo i df con numero di buyout per nhood per anno e per mese
temporary <- Buyout_Agreements_clean
Buyout_Agreements_clean <- Buyout_Agreements_clean[-c(2,10,11)]
Buyout_Agreements_clean$buyout_amount <- as.double(Buyout_Agreements_clean$buyout_amount)
vect_year = paste(Buyout_Agreements_clean$year)
vect_month = paste(Buyout_Agreements_clean$month)
vect_nhood = paste(Buyout_Agreements_clean$nhood)
vect_aus = paste(vect_month,vect_year,vect_nhood)
vect_aus2 = paste(vect_year,vect_nhood)
Buyout_Agreements_clean$year_nhood = vect_aus2
Buyout_Agreements_clean$month_year_nhood = vect_aus
rm(vect_aus,vect_aus2,vect_year,vect_nhood,vect_month)
length(unique(Buyout_Agreements_clean$year_nhood)) #260 osservazioni
Buyout_Agreements_clean$dummy = 1
buyout_nhood_yearly = aggregate(Buyout_Agreements_clean[,c(2,11)], by = list(Buyout_Agreements_clean$year_nhood), FUN = sum)
names(buyout_nhood_yearly)[names(buyout_nhood_yearly) == 'Group.1'] <- 'year_nhood'
names(buyout_nhood_yearly)[names(buyout_nhood_yearly) == 'dummy'] <- 'Count'
buyout_nhood_yearly$avg_buyout = buyout_nhood_yearly$buyout_amount / buyout_nhood_yearly$Count
length(unique(Buyout_Agreements_clean$month_year_nhood)) #1383 osservazioni
buyout_nhood_monthly = aggregate(Buyout_Agreements_clean[,c(2,11)], by = list(Buyout_Agreements_clean$month_year_nhood), FUN = sum)
names(buyout_nhood_monthly)[names(buyout_nhood_monthly) == 'Group.1'] <- 'nhood_month_year'
names(buyout_nhood_monthly)[names(buyout_nhood_monthly) == 'dummy'] <- 'Count'
buyout_nhood_monthly$avg_buyout = buyout_nhood_monthly$buyout_amount / buyout_nhood_monthly$Count
for (i in 1:length(buyout_nhood_monthly[,1])) {   #preparo bene le coordinate
temp <- strsplit(buyout_nhood_monthly[i,2], " ")
for (j in 1:length(temp[[1]])){
buyout_nhood_monthly[i,5+j] <- temp[[1]][j]
}
}
for( i in 1:length(buyout_nhood_monthly[,1])){  #preparo l'address
j = 9
while (j < 12) {
if(!(is.na(buyout_nhood_monthly[i,j]))) {
buyout_nhood_monthly[i,8] = paste(buyout_nhood_monthly[i,8], buyout_nhood_monthly[i,j], sep=" ")
j = j+1
}
else
j = 14
}
}
Buyout_Agreements <- read.csv("C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements.csv", header=TRUE)
Buyout_Agreements <- Buyout_Agreements[,-c(1,2,5:7,27,9,10,13:27)] #selezione covariate di interesse
Buyout_Agreements <- Buyout_Agreements[!(Buyout_Agreements[,4]==""), ] #elimino buyout senza quartiere
Buyout_Agreements <- Buyout_Agreements[!duplicated(Buyout_Agreements),] #elimino buyout duplici (fatti nello stesso giorno, alla stessa cifra, nello stesso indirizzo)
Buyout_Agreements <- Buyout_Agreements[(Buyout_Agreements[,1] != ""),] #tolgo quelli senza data
for (i in 1:length(Buyout_Agreements[,1])) {   #preparo bene le coordinate
temp <- strsplit(Buyout_Agreements[i,5], "\\(")
Buyout_Agreements[i,5] <- temp[[1]][2]
}
for (i in 1:length(Buyout_Agreements[,1])) {   #preparo bene le coordinate
temp <- strsplit(Buyout_Agreements[i,5], " ")
Buyout_Agreements[i,6] <- temp[[1]][1]
Buyout_Agreements[i,7] <- temp[[1]][2]
}
for (i in 1:length(Buyout_Agreements[,1])) {   #preparo bene le coordinate
temp <- strsplit(Buyout_Agreements[i,7], "\\)")
Buyout_Agreements[i,7] <- temp[[1]][1]
}
for (i in 1:length(Buyout_Agreements[,1])) {    #preparo le date
temp <- strsplit(Buyout_Agreements[i,1], "/")
Buyout_Agreements[i,8] <- temp[[1]][1]
Buyout_Agreements[i,9] <- temp[[1]][3]
Buyout_Agreements[i,8] <- as.double(Buyout_Agreements[i,8])
Buyout_Agreements[i,9] <- as.double(Buyout_Agreements[i,9])
}
Buyout_Agreements <- Buyout_Agreements[,-c(1,5)]
colnames(Buyout_Agreements) <- c('buyout_amount', 'address','nhood', 'long','lat', 'month','year')
write.csv(Buyout_Agreements,"C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements_Clean.csv")
Buyout_Agreements_clean <- read.csv("C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements_clean.csv", header=TRUE)
Buyout_Agreements <- read.csv("C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements.csv", header=TRUE)
Buyout_Agreements <- Buyout_Agreements[,-c(1,2,5:7,27,9,10,13:27)] #selezione covariate di interesse
Buyout_Agreements <- Buyout_Agreements[!(Buyout_Agreements[,4]==""), ] #elimino buyout senza quartiere
Buyout_Agreements <- Buyout_Agreements[!duplicated(Buyout_Agreements),] #elimino buyout duplici (fatti nello stesso giorno, alla stessa cifra, nello stesso indirizzo)
Buyout_Agreements <- Buyout_Agreements[(Buyout_Agreements[,1] != ""),] #tolgo quelli senza data
for (i in 1:length(Buyout_Agreements[,1])) {   #preparo bene le coordinate
temp <- strsplit(Buyout_Agreements[i,5], "\\(")
Buyout_Agreements[i,5] <- temp[[1]][2]
}
for (i in 1:length(Buyout_Agreements[,1])) {   #preparo bene le coordinate
temp <- strsplit(Buyout_Agreements[i,5], " ")
Buyout_Agreements[i,6] <- temp[[1]][1]
Buyout_Agreements[i,7] <- temp[[1]][2]
}
for (i in 1:length(Buyout_Agreements[,1])) {   #preparo bene le coordinate
temp <- strsplit(Buyout_Agreements[i,7], "\\)")
Buyout_Agreements[i,7] <- temp[[1]][1]
}
for (i in 1:length(Buyout_Agreements[,1])) {    #preparo le date
temp <- strsplit(Buyout_Agreements[i,1], "/")
Buyout_Agreements[i,8] <- temp[[1]][1]
Buyout_Agreements[i,9] <- temp[[1]][3]
Buyout_Agreements[i,8] <- as.double(Buyout_Agreements[i,8])
Buyout_Agreements[i,9] <- as.double(Buyout_Agreements[i,9])
}
Buyout_Agreements <- Buyout_Agreements[,-c(1,5)]
colnames(Buyout_Agreements) <- c('buyout_amount', 'address','nhood', 'long','lat', 'month','year')
write.csv(Buyout_Agreements,"C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements_Clean.csv")
write.csv(Buyout_Agreements,"C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements_clean.csv")
setwd("C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses")
write.csv(Buyout_Agreements,"C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements_clean.csv")
Buyout_Agreements_clean <- read.csv("C:/Users/Pietro/Desktop/Pietro/Politecnico/Magistrale/Nonparametric_Statistics/Progetto/ricerca di progetti/Progetto Case SF/SF-houses/Buyout_Agreements_clean.csv", header=TRUE)
